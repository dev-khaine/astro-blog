---
import { SITE_TITLE } from '../consts';
const year = new Date().getFullYear();
---

<!-- Newsletter -->
<section class="newsletter-wrap" aria-labelledby="newsletter-heading">
  <div class="newsletter-inner">
    <div class="nl-left">
      <p class="label nl-label">
        <span class="en-text">The Qoinra Brief</span>
        <span class="ar-text">نشرة كوينرا</span>
      </p>
      <h2 id="newsletter-heading" class="nl-heading">
        <span class="en-text">The digital economy<br/>moves fast. <span class="nl-gold">Stay ahead.</span></span>
        <span class="ar-text">الاقتصاد الرقمي يتحرك بسرعة.<br/><span class="nl-gold">كن في الطليعة.</span></span>
      </h2>
      <p class="nl-desc">
        <span class="en-text">Weekly insights on markets, crypto, tech, and online income — written clearly so you can act on it. No noise. No ads. Unsubscribe anytime.</span>
        <span class="ar-text">رؤى أسبوعية حول الأسواق والعملات الرقمية والتكنولوجيا وفرص الدخل — مكتوبة بوضوح لتتمكن من التصرف بناءً عليها. بلا ضجيج. بلا إعلانات. إلغاء الاشتراك في أي وقت.</span>
      </p>
    </div>
    <form class="nl-form" action="#" method="post">
      <div class="nl-input-row">
        <label for="nl-email" class="sr-only">
          <span class="en-text">Email address</span>
          <span class="ar-text">البريد الإلكتروني</span>
        </label>
        <input
          id="nl-email"
          type="email"
          name="email"
          class="nl-email-input"
          required
          autocomplete="email"
        />
        <button type="submit" class="btn btn-gold">
          <span class="en-text">Subscribe</span>
          <span class="ar-text">اشترك</span>
        </button>
      </div>
      <p class="nl-note">
        <span class="en-text">By subscribing you agree to our <a href="/privacy">Privacy Policy</a>.</span>
        <span class="ar-text">بالاشتراك فإنك توافق على <a href="/privacy">سياسة الخصوصية</a>.</span>
      </p>
    </form>
  </div>
</section>

<footer>
  <div class="footer-inner">
    <!-- Brand col -->
    <div class="footer-brand">
      <a href="/" class="f-logo">
        <span class="en-text">{SITE_TITLE}</span>
        <span class="ar-text">كوينرا</span>
      </a>
      <p class="f-desc">
        <span class="en-text">Understanding finance, economics, and technology in the modern digital world.</span>
        <span class="ar-text">فهم المال والاقتصاد والتكنولوجيا في العصر الرقمي الحديث.</span>
      </p>
      <div class="f-socials">
        <a href="https://twitter.com" target="_blank" rel="noopener" class="f-social" aria-label="Twitter/X">
          <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.741l7.73-8.835L1.254 2.25H8.08l4.253 5.622zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </a>
        <a href="https://linkedin.com" target="_blank" rel="noopener" class="f-social" aria-label="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </a>
        <a href="/rss.xml" class="f-social" aria-label="RSS Feed">
          <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
        </a>
      </div>
    </div>

    <!-- Nav cols -->
    <nav class="footer-nav" aria-label="Footer">
      <div class="fn-col">
        <p class="fn-heading label">
          <span class="en-text">Explore</span>
          <span class="ar-text">استكشف</span>
        </p>
        <ul>
          <li><a href="/"><span class="en-text">Home</span><span class="ar-text">الرئيسية</span></a></li>
          <li><a href="/blog"><span class="en-text">Articles</span><span class="ar-text">المقالات</span></a></li>
          <li><a href="/about"><span class="en-text">About</span><span class="ar-text">عن الموقع</span></a></li>
          <li><a href="/search"><span class="en-text">Search</span><span class="ar-text">بحث</span></a></li>
        </ul>
      </div>
      <div class="fn-col">
        <p class="fn-heading label">
          <span class="en-text">Topics</span>
          <span class="ar-text">المواضيع</span>
        </p>
        <ul>
          <li><a href="/blog?tag=markets"><span class="en-text">Markets</span><span class="ar-text">الأسواق</span></a></li>
          <li><a href="/blog?tag=crypto"><span class="en-text">Crypto</span><span class="ar-text">العملات الرقمية</span></a></li>
          <li><a href="/blog?tag=trading"><span class="en-text">Trading</span><span class="ar-text">التداول</span></a></li>
          <li><a href="/blog?tag=tech"><span class="en-text">Tech</span><span class="ar-text">التكنولوجيا</span></a></li>
          <li><a href="/blog?tag=online-income"><span class="en-text">Online Income</span><span class="ar-text">الدخل الرقمي</span></a></li>
        </ul>
      </div>
      <div class="fn-col">
        <p class="fn-heading label">
          <span class="en-text">Meta</span>
          <span class="ar-text">روابط</span>
        </p>
        <ul>
          <li><a href="/rss.xml" target="_blank">RSS</a></li>
          <li><a href="/sitemap-index.xml"><span class="en-text">Sitemap</span><span class="ar-text">خريطة الموقع</span></a></li>
          <li><a href="/privacy"><span class="en-text">Privacy</span><span class="ar-text">الخصوصية</span></a></li>
          <li><a href="/disclaimer"><span class="en-text">Disclaimer</span><span class="ar-text">إخلاء المسؤولية</span></a></li>
        </ul>
      </div>
    </nav>
  </div>

  <!-- Disclaimer -->
  <div class="footer-disclaimer">
    <div class="disclaimer-inner">
      <p>
        <strong>
          <span class="en-text">Disclaimer:</span>
          <span class="ar-text">إخلاء المسؤولية:</span>
        </strong>
        <span class="en-text">{SITE_TITLE} is for informational and educational purposes only. Nothing on this site constitutes financial, investment, legal, or tax advice. Past performance is not indicative of future results. Always do your own research.</span>
        <span class="ar-text">كوينرا للأغراض الإعلامية والتعليمية فقط. لا يُعدّ أي شيء في هذا الموقع نصيحة مالية أو استثمارية أو قانونية أو ضريبية. الأداء السابق لا يدل على النتائج المستقبلية. قم دائمًا بإجراء بحثك الخاص.</span>
      </p>
    </div>
  </div>

  <!-- Bottom bar -->
  <div class="footer-bottom">
    <div class="fb-inner">
      <p>
        &copy; {year}
        <span class="en-text">{SITE_TITLE}. All rights reserved.</span>
        <span class="ar-text">كوينرا. جميع الحقوق محفوظة.</span>
      </p>
      <p>
        <span class="en-text">Built with</span>
        <span class="ar-text">مبني بـ</span>
        <a href="https://astro.build" target="_blank" rel="noopener">Astro</a>
      </p>
    </div>
  </div>
</footer>

<style>
  /* Newsletter */
  .newsletter-wrap {
    background: var(--bg-raised);
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    padding-block: var(--sp-xl);
    position: relative; overflow: hidden;
  }
  .newsletter-wrap::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse 600px 300px at 80% 50%, var(--gold-glow), transparent);
    pointer-events: none;
  }
  [dir="rtl"] .newsletter-wrap::before {
    background: radial-gradient(ellipse 600px 300px at 20% 50%, var(--gold-glow), transparent);
  }
  .newsletter-inner {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--sp-xl);
    align-items: center;
    width: min(var(--wide-w), 100% - 2rem);
    margin-inline: auto; position: relative;
  }
  .nl-label { margin-bottom: 0.75rem; display: block; }
  .nl-heading {
    font-size: clamp(2.5rem, 4vw, 4rem);
    line-height: 1.1;
    margin-bottom: var(--sp-sm);
    color: var(--fg);
  }
  [dir="rtl"] .nl-heading {
    font-family: var(--font-arabic);
    font-weight: 700;
    text-transform: none;
    letter-spacing: 0;
    line-height: 1.4;
  }
  .nl-gold { color: var(--gold); }
  .nl-desc {
    font-family: var(--font-sans); font-size: var(--s-sm);
    color: var(--fg-muted); line-height: 1.6; font-weight: 300; margin: 0;
  }
  [dir="rtl"] .nl-desc { font-family: var(--font-arabic); font-weight: 400; line-height: 1.9; }
  .nl-form { display: flex; flex-direction: column; gap: 0.75rem; }
  .nl-input-row { display: flex; gap: 0.5rem; }
  .nl-input-row .nl-email-input { flex: 1; }
  .nl-note {
    font-family: var(--font-mono); font-size: var(--s-2xs);
    color: var(--fg-subtle); letter-spacing: 0.04em; margin: 0; line-height: 1.5;
  }
  [dir="rtl"] .nl-note { font-family: var(--font-arabic); letter-spacing: 0; font-size: var(--s-xs); }
  .nl-note a { color: var(--fg-subtle); text-decoration: underline; }
  .nl-note a:hover { color: var(--gold); }

  /* Footer main */
  footer { background: var(--bg); border-top: 1px solid var(--border); }
  .footer-inner {
    display: grid;
    grid-template-columns: 1.6fr 1fr;
    gap: var(--sp-xl);
    width: min(var(--wide-w), 100% - 2rem);
    margin-inline: auto;
    padding-block: var(--sp-xl);
  }
  .f-logo {
    font-family: var(--font-display); font-size: 2.2rem;
    letter-spacing: 0.08em; text-transform: uppercase;
    color: var(--fg); text-decoration: none; display: block;
    margin-bottom: 0.75rem; transition: color var(--t1);
  }
  [dir="rtl"] .f-logo {
    font-family: var(--font-arabic); font-weight: 700;
    letter-spacing: 0; text-transform: none; font-size: 1.8rem;
  }
  .f-logo:hover { color: var(--gold); }
  .f-desc {
    font-family: var(--font-sans); font-size: var(--s-xs); font-weight: 300;
    color: var(--fg-muted); line-height: 1.65; max-width: 340px; margin-bottom: var(--sp-md);
  }
  [dir="rtl"] .f-desc { font-family: var(--font-arabic); font-weight: 400; line-height: 1.9; }
  .f-socials { display: flex; gap: 0.4rem; }
  .f-social {
    display: flex; align-items: center; justify-content: center;
    width: 32px; height: 32px;
    border: 1px solid var(--border); border-radius: var(--r-sm);
    color: var(--fg-muted); text-decoration: none;
    transition: border-color var(--t1), color var(--t1), background var(--t1);
  }
  .f-social:hover { border-color: var(--gold-dim); color: var(--gold); background: var(--gold-glow); }

  /* Footer nav */
  .footer-nav { display: flex; gap: var(--sp-lg); }
  .fn-col ul { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.4rem; }
  .fn-heading { margin-bottom: 0.75rem; display: block; }
  .fn-col a {
    font-family: var(--font-mono); font-size: var(--s-xs);
    color: var(--fg-muted); text-decoration: none; letter-spacing: 0.04em;
    transition: color var(--t1);
  }
  [dir="rtl"] .fn-col a { font-family: var(--font-arabic); letter-spacing: 0; font-size: var(--s-sm); font-weight: 500; }
  .fn-col a:hover { color: var(--gold); }

  /* Disclaimer */
  .footer-disclaimer { border-top: 1px solid var(--border); padding-block: var(--sp-md); }
  .disclaimer-inner { width: min(var(--wide-w), 100% - 2rem); margin-inline: auto; }
  .disclaimer-inner p {
    font-family: var(--font-mono); font-size: var(--s-2xs);
    color: var(--fg-subtle); line-height: 1.6; letter-spacing: 0.03em; margin: 0;
  }
  [dir="rtl"] .disclaimer-inner p { font-family: var(--font-arabic); letter-spacing: 0; font-size: var(--s-xs); line-height: 1.8; }
  .disclaimer-inner strong { font-weight: 600; color: var(--fg-muted); }

  /* Bottom bar */
  .footer-bottom { border-top: 1px solid var(--border); padding-block: var(--sp-sm); }
  .fb-inner {
    display: flex; justify-content: space-between; align-items: center;
    width: min(var(--wide-w), 100% - 2rem); margin-inline: auto;
  }
  .fb-inner p {
    font-family: var(--font-mono); font-size: var(--s-2xs);
    color: var(--fg-subtle); letter-spacing: 0.06em; margin: 0;
  }
  [dir="rtl"] .fb-inner p { font-family: var(--font-arabic); letter-spacing: 0; font-size: var(--s-xs); }
  .fb-inner a { color: var(--fg-muted); }
  .fb-inner a:hover { color: var(--gold); }

  /* Responsive */
  @media (max-width: 900px) {
    .newsletter-inner { grid-template-columns: 1fr; }
    .footer-inner { grid-template-columns: 1fr; }
    .footer-nav { flex-wrap: wrap; gap: var(--sp-md); }
  }
  @media (max-width: 600px) {
    .nl-input-row { flex-direction: column; }
    .fb-inner { flex-direction: column; gap: 0.5rem; text-align: center; }
  }
</style>

<script>
  // Update email placeholder based on current lang
  const updatePlaceholder = () => {
    const lang = document.documentElement.getAttribute('data-lang') || 'en';
    const input = document.querySelector('.nl-email-input') as HTMLInputElement | null;
    if (input) {
      input.placeholder = lang === 'ar' ? 'بريدك@الإلكتروني.com' : 'your@email.com';
      input.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
    }
  };

  updatePlaceholder();

  const observer = new MutationObserver(updatePlaceholder);
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-lang'] });
</script>