---
import { SITE_TITLE } from '../consts';
---

<a href="#main-content" class="skip-link">
  <span class="en-text">Skip to content</span>
  <span class="ar-text">تخطى إلى المحتوى</span>
</a>
<div id="scroll-progress" aria-hidden="true"></div>

<!-- Blocking inline script: apply lang+dir BEFORE first paint to avoid layout flash -->
<script>
  (function() {
    var lang = localStorage.getItem('lang') || 'en';
    var html = document.documentElement;
    html.setAttribute('lang', lang);
    html.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
    html.setAttribute('data-lang', lang);
  })();
</script>

<div id="site-header">

  <!-- ── TICKER STRIP ── -->
  <div class="ticker-strip" aria-label="Market data">
    <div class="ticker-track" aria-hidden="true">
      <span class="t-item"><span class="t-sym">SPX</span>&nbsp;<span class="t-val">5,234.18</span>&nbsp;<span class="t-up">+0.82%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">NDX</span>&nbsp;<span class="t-val">18,290.40</span>&nbsp;<span class="t-up">+1.12%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">DJI</span>&nbsp;<span class="t-val">39,112.77</span>&nbsp;<span class="t-dn">−0.21%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">BTC</span>&nbsp;<span class="t-val">67,840</span>&nbsp;<span class="t-up">+2.4%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">10Y</span>&nbsp;<span class="t-val">4.31%</span>&nbsp;<span class="t-dn">−3bps</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">EUR/USD</span>&nbsp;<span class="t-val">1.0842</span>&nbsp;<span class="t-up">+0.14%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">GOLD</span>&nbsp;<span class="t-val">2,341.20</span>&nbsp;<span class="t-up">+0.6%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">OIL</span>&nbsp;<span class="t-val">81.44</span>&nbsp;<span class="t-dn">−0.38%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">ETH</span>&nbsp;<span class="t-val">3,412.00</span>&nbsp;<span class="t-up">+1.8%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">SPX</span>&nbsp;<span class="t-val">5,234.18</span>&nbsp;<span class="t-up">+0.82%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">NDX</span>&nbsp;<span class="t-val">18,290.40</span>&nbsp;<span class="t-up">+1.12%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">DJI</span>&nbsp;<span class="t-val">39,112.77</span>&nbsp;<span class="t-dn">−0.21%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">BTC</span>&nbsp;<span class="t-val">67,840</span>&nbsp;<span class="t-up">+2.4%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">10Y</span>&nbsp;<span class="t-val">4.31%</span>&nbsp;<span class="t-dn">−3bps</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">EUR/USD</span>&nbsp;<span class="t-val">1.0842</span>&nbsp;<span class="t-up">+0.14%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">GOLD</span>&nbsp;<span class="t-val">2,341.20</span>&nbsp;<span class="t-up">+0.6%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">OIL</span>&nbsp;<span class="t-val">81.44</span>&nbsp;<span class="t-dn">−0.38%</span></span>
      <span class="t-sep">|</span>
      <span class="t-item"><span class="t-sym">ETH</span>&nbsp;<span class="t-val">3,412.00</span>&nbsp;<span class="t-up">+1.8%</span></span>
    </div>
  </div>

  <!-- ── NAV BAR ── -->
  <header class="nav-bar">
    <div class="nav-inner">

      <!-- Logo -->
      <a href="/" class="logo" aria-label={`${SITE_TITLE} — Home`}>
        <svg class="logo-svg" width="320" height="320" viewBox="0 0 320 320" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M253.889 51.6667C253.889 56.5759 257.869 60.5556 262.778 60.5556H311.111C316.02 60.5556 320 64.5353 320 69.4444V162.222C320 164.419 319.186 166.538 317.716 168.171L183.622 317.06C181.937 318.931 179.536 320 177.017 320H47.7778C21.3908 320 0 298.609 0 272.222V47.7778C4.582e-06 21.3908 21.3908 0 47.7778 0H245C249.909 0 253.889 3.97969 253.889 8.88889V51.6667ZM320 311.111C320 316.02 316.02 320 311.111 320H262.778C257.869 320 253.889 316.02 253.889 311.111V268.333C253.889 263.424 257.869 259.444 262.778 259.444H311.111C316.02 259.444 320 263.424 320 268.333V311.111ZM100.771 75.5556C86.8451 75.5556 75.5556 86.8451 75.5556 100.771V219.229C75.5556 233.155 86.8451 244.444 100.771 244.444H219.229C233.155 244.444 244.444 233.155 244.444 219.229V100.771C244.444 86.8451 233.155 75.5556 219.229 75.5556H100.771ZM192.778 181.111C192.778 186.02 188.798 190 183.889 190H135.556C130.646 190 126.667 186.02 126.667 181.111V138.333C126.667 133.424 130.646 129.444 135.556 129.444H183.889C188.798 129.444 192.778 133.424 192.778 138.333V181.111Z" fill="currentColor"/>
        </svg>
        <span class="logo-wordmark">{SITE_TITLE}</span>
      </a>

      <!-- Right cluster: search · theme · lang · divider · menu -->
      <div class="nav-right">

        <!-- Search -->
        <a href="/search" class="icon-btn" aria-label="Search">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="1.75"
               stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
          </svg>
        </a>

        <!-- Theme toggle -->
        <button id="theme-toggle" class="icon-btn" aria-label="Toggle light/dark mode">
          <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="12" cy="12" r="4"/>
            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
          </svg>
          <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
          </svg>
        </button>

        <!-- Language toggle -->
        <button id="lang-toggle" class="lang-toggle" aria-label="Switch to Arabic">
          <span class="en-text">عربي</span>
          <span class="ar-text">EN</span>
        </button>

        <!-- Divider -->
        <span class="nav-divider" aria-hidden="true"></span>

        <!-- Menu button + dropdown -->
        <div class="menu-wrap" id="menu-wrap">
          <button id="menu-toggle" class="icon-btn menu-btn"
            aria-expanded="false" aria-controls="nav-dropdown" aria-haspopup="true">
            <svg class="icon-grid" xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <rect x="3"  y="3"  width="7" height="7" rx="1"/>
              <rect x="14" y="3"  width="7" height="7" rx="1"/>
              <rect x="3"  y="14" width="7" height="7" rx="1"/>
              <rect x="14" y="14" width="7" height="7" rx="1"/>
            </svg>
            <svg class="icon-x" xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
          </button>

          <!-- Dropdown -->
          <nav id="nav-dropdown" class="nav-dropdown" role="menu">
            <div class="dropdown-inner">
              <p class="dropdown-label">
                <span class="en-text">Navigate</span>
                <span class="ar-text">التنقل</span>
              </p>

              <a href="/" class="dropdown-link" role="menuitem">
                <span class="dl-icon" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                </span>
                <span class="en-text">Home</span>
                <span class="ar-text">الرئيسية</span>
              </a>

              <a href="/blog" class="dropdown-link" role="menuitem">
                <span class="dl-icon" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
                </span>
                <span class="en-text">Articles</span>
                <span class="ar-text">المقالات</span>
              </a>

              <a href="/about" class="dropdown-link" role="menuitem">
                <span class="dl-icon" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M20 21a8 8 0 1 0-16 0"/></svg>
                </span>
                <span class="en-text">About</span>
                <span class="ar-text">عن الموقع</span>
              </a>

              <a href="/search" class="dropdown-link" role="menuitem">
                <span class="dl-icon" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                </span>
                <span class="en-text">Search</span>
                <span class="ar-text">بحث</span>
              </a>

              <div class="dropdown-divider" aria-hidden="true"></div>

              <a href="/rss.xml" class="dropdown-link" role="menuitem" target="_blank" rel="noopener noreferrer">
                <span class="dl-icon" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
                </span>
                RSS Feed
                <svg class="dl-ext" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
              </a>
            </div>
          </nav>
        </div>

      </div>
    </div>
  </header>

</div>

<div id="menu-backdrop" class="menu-backdrop" aria-hidden="true"></div>

<style>
  .skip-link {
    position: absolute; top: -100%; left: 1rem;
    background: var(--gold); color: #000;
    padding: 0.45rem 1rem; border-radius: 4px;
    font-family: var(--font-mono); font-size: 0.78rem;
    font-weight: 700; letter-spacing: 0.06em;
    text-transform: uppercase; text-decoration: none; z-index: 9999;
  }
  .skip-link:focus { top: 0.75rem; }

  #scroll-progress {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 2px;
    background: linear-gradient(90deg, var(--gold-dim), var(--gold), var(--gold-bright));
    transform-origin: left center; transform: scaleX(0);
    z-index: 9999; pointer-events: none;
  }
  [dir="rtl"] #scroll-progress { transform-origin: right center; }

  #site-header {
    position: sticky; top: 0; z-index: 200;
    background: var(--bg); border-bottom: 1px solid var(--border);
    will-change: transform;
    transition: background 0.36s ease, box-shadow 0.22s ease, border-color 0.22s ease;
  }
  #site-header.scrolled {
    box-shadow: 0 4px 32px rgba(0,0,0,0.55);
    border-bottom-color: var(--gold-dim);
  }

  /* Ticker */
  .ticker-strip {
    height: 26px; background: var(--bg-raised);
    border-bottom: 1px solid var(--border);
    overflow: hidden; display: flex; align-items: center;
  }
  .ticker-track {
    display: flex; align-items: center; white-space: nowrap;
    animation: run-ticker 55s linear infinite; will-change: transform;
  }
  @keyframes run-ticker { from { transform: translateX(0); } to { transform: translateX(-50%); } }
  .t-item { display: inline-flex; align-items: center; padding-inline: 1.4em; font-family: var(--font-mono); font-size: 10px; letter-spacing: 0.05em; text-transform: uppercase; }
  .t-sep  { color: var(--border-hi); font-size: 10px; font-family: var(--font-mono); padding-inline: 0.1em; }
  .t-sym  { color: var(--fg-subtle); }
  .t-val  { color: var(--fg); font-weight: 500; }
  .t-up   { color: var(--positive); font-weight: 600; }
  .t-dn   { color: var(--negative); font-weight: 600; }

  /* Nav bar */
  .nav-bar { display: block; background: transparent; }
  .nav-inner {
    display: flex; align-items: center; justify-content: space-between;
    height: 62px;
    width: min(1140px, 100% - 2.5rem);
    margin-inline: auto;
  }

  /* Logo */
  .logo {
    display: flex; flex-direction: row; align-items: center;
    gap: 0.55rem; text-decoration: none; flex-shrink: 0;
  }
  .logo-svg {
    width: 28px; height: 28px; flex-shrink: 0;
    color: var(--fg);
    transition: color 0.11s ease;
  }
  .logo:hover .logo-svg { color: var(--gold); }
  .logo-wordmark {
    font-family: var(--font-display); font-size: 1.65rem;
    line-height: 1; letter-spacing: 0.12em; text-transform: uppercase;
    color: var(--fg); transition: color 0.11s ease;
  }
  [dir="rtl"] .logo-wordmark {
    font-family: var(--font-arabic); font-weight: 700;
    letter-spacing: 0; text-transform: none; font-size: 1.5rem;
  }
  .logo:hover .logo-wordmark { color: var(--gold); }

  .nav-right { display: flex; align-items: center; gap: 0.2rem; margin-inline-start: auto; }

  /* Icon buttons */
  .icon-btn {
    display: flex; align-items: center; justify-content: center;
    width: 38px; height: 38px; padding: 0; border: none; border-radius: 5px;
    background: transparent; color: var(--fg-muted);
    cursor: pointer; text-decoration: none;
    transition: background 0.11s ease, color 0.11s ease; flex-shrink: 0;
  }
  .icon-btn:hover { background: var(--bg-raised); color: var(--gold); }

  /* Theme icons */
  .icon-sun  { display: block; }
  .icon-moon { display: none; }
  [data-theme="light"] .icon-sun  { display: none; }
  [data-theme="light"] .icon-moon { display: block; }

  .nav-divider { display: block; width: 1px; height: 20px; background: var(--border-hi); margin-inline: 0.35rem; flex-shrink: 0; }

  /* Menu icon swap */
  .icon-grid { display: block; }
  .icon-x    { display: none; }
  #menu-toggle[aria-expanded="true"] .icon-grid { display: none; }
  #menu-toggle[aria-expanded="true"] .icon-x    { display: block; }
  #menu-toggle[aria-expanded="true"] { background: var(--bg-raised); color: var(--gold); }

  .menu-wrap { position: relative; flex-shrink: 0; }

  /* Dropdown */
  .nav-dropdown {
    display: none;
    position: absolute;
    top: calc(100% + 10px);
    inset-inline-end: 0;
    width: 220px;
    background: var(--bg-card);
    border: 1px solid var(--border-hi);
    border-top: 2px solid var(--gold-dim);
    border-radius: 8px;
    box-shadow: 0 8px 40px rgba(0,0,0,0.55), 0 2px 10px rgba(0,0,0,0.35);
    z-index: 500; overflow: hidden;
  }
  .nav-dropdown.is-open {
    display: block;
    animation: dropdown-in 0.18s ease both;
  }
  @keyframes dropdown-in {
    from { opacity: 0; transform: translateY(-8px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0)    scale(1); }
  }
  .dropdown-inner { padding: 0.6rem 0.4rem; }
  .dropdown-label {
    font-family: var(--font-mono); font-size: 9px; font-weight: 600;
    letter-spacing: 0.16em; text-transform: uppercase;
    color: var(--gold-dim); padding: 0.3rem 0.75rem 0.5rem; margin: 0;
  }
  [dir="rtl"] .dropdown-label { font-family: var(--font-arabic); letter-spacing: 0; font-size: 0.72rem; }

  .dropdown-link {
    display: flex; align-items: center; gap: 0.65em;
    padding: 0.6em 0.75em;
    font-family: var(--font-mono); font-size: 0.82rem; font-weight: 500;
    letter-spacing: 0.06em; text-transform: uppercase;
    color: var(--fg-muted); text-decoration: none;
    border-radius: 5px;
    transition: background 0.1s ease, color 0.1s ease;
  }
  [dir="rtl"] .dropdown-link {
    font-family: var(--font-arabic); letter-spacing: 0;
    text-transform: none; font-size: 0.92rem; font-weight: 600;
  }
  .dropdown-link:hover, .dropdown-link:focus {
    background: var(--bg-raised); color: var(--gold); outline: none;
  }
  .dropdown-link[data-active="true"] { color: var(--gold); background: var(--gold-glow); }

  .dl-icon { display: flex; align-items: center; justify-content: center; width: 20px; height: 20px; color: var(--fg-subtle); flex-shrink: 0; transition: color 0.1s; }
  .dropdown-link:hover .dl-icon, .dropdown-link:focus .dl-icon { color: var(--gold-dim); }
  .dl-ext { margin-inline-start: auto; color: var(--fg-subtle); flex-shrink: 0; }

  .dropdown-divider { height: 1px; background: var(--border); margin: 0.4rem 0.75rem; }

  /* Backdrop */
  .menu-backdrop {
    display: none; position: fixed; inset: 0;
    z-index: 199; background: transparent; cursor: default;
  }
  .menu-backdrop.is-active { display: block; }

  @media (max-width: 720px) {
    .ticker-strip { display: none; }
    .logo-svg { width: 22px; height: 22px; }
    .logo-wordmark { font-size: 1.35rem; }
    [dir="rtl"] .logo-wordmark { font-size: 1.2rem; }
  }
  @media (prefers-reduced-motion: reduce) {
    .ticker-track { animation: none; }
    .nav-dropdown.is-open { animation: none; }
  }
</style>

<script>
  // ── THEME ───────────────────────────────────────────────────────
  function getTheme() {
    return localStorage.getItem('theme') ||
      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  }

  function applyTheme(t) {
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('theme', t);
  }
  applyTheme(getTheme());

  document.getElementById('theme-toggle').addEventListener('click', function () {
    applyTheme(getTheme() === 'dark' ? 'light' : 'dark');
  });

  // ── LANGUAGE ────────────────────────────────────────────────────
  function getLang() {
    return localStorage.getItem('lang') || 'en';
  }

  function applyLang(lang) {
    var html = document.documentElement;
    html.setAttribute('lang', lang);
    html.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
    html.setAttribute('data-lang', lang);
    localStorage.setItem('lang', lang);
    var btn = document.getElementById('lang-toggle');
    if (btn) {
      btn.setAttribute('aria-label', lang === 'ar' ? 'Switch to English' : 'Switch to Arabic');
    }
  }

  applyLang(getLang());

  document.getElementById('lang-toggle').addEventListener('click', function () {
    applyLang(getLang() === 'en' ? 'ar' : 'en');
  });

  // ── MENU DROPDOWN ───────────────────────────────────────────────
  var menuToggle  = document.getElementById('menu-toggle');
  var navDropdown = document.getElementById('nav-dropdown');
  var backdrop    = document.getElementById('menu-backdrop');

  function openMenu() {
    navDropdown.classList.add('is-open');
    backdrop.classList.add('is-active');
    menuToggle.setAttribute('aria-expanded', 'true');
    var first = navDropdown.querySelector('.dropdown-link');
    if (first) first.focus();
  }

  function closeMenu() {
    navDropdown.classList.remove('is-open');
    backdrop.classList.remove('is-active');
    menuToggle.setAttribute('aria-expanded', 'false');
  }

  menuToggle.addEventListener('click', function (e) {
    e.stopPropagation();
    navDropdown.classList.contains('is-open') ? closeMenu() : openMenu();
  });

  backdrop.addEventListener('click', closeMenu);

  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape' && navDropdown.classList.contains('is-open')) {
      closeMenu();
      menuToggle.focus();
    }
  });

  navDropdown.addEventListener('keydown', function (e) {
    var links = Array.from(navDropdown.querySelectorAll('.dropdown-link'));
    var idx = links.indexOf(document.activeElement);
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      var next = links[(idx + 1) % links.length];
      if (next) next.focus();
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      if (idx <= 0) { menuToggle.focus(); }
      else { var prev = links[idx - 1]; if (prev) prev.focus(); }
    } else if (e.key === 'Tab' && !e.shiftKey && idx === links.length - 1) {
      e.preventDefault();
      closeMenu();
      menuToggle.focus();
    }
  });

  // Mark active page
  var currentPath = window.location.pathname.replace(/\/$/, '') || '/';
  navDropdown.querySelectorAll('.dropdown-link').forEach(function (link) {
    var href = link.getAttribute('href') || '';
    if ((href === '/' && (currentPath === '' || currentPath === '/')) ||
        (href !== '/' && currentPath.startsWith(href))) {
      link.setAttribute('data-active', 'true');
      link.setAttribute('aria-current', 'page');
    }
  });

  // ── SCROLL ──────────────────────────────────────────────────────
  var siteHeader = document.getElementById('site-header');
  window.addEventListener('scroll', function () {
    siteHeader.classList.toggle('scrolled', window.scrollY > 10);
  }, { passive: true });

  var bar = document.getElementById('scroll-progress');
  if (bar) {
    function updateBar() {
      var scrolled = document.documentElement.scrollTop;
      var total = document.documentElement.scrollHeight - window.innerHeight;
      bar.style.transform = 'scaleX(' + (total > 0 ? scrolled / total : 0) + ')';
    }
    window.addEventListener('scroll', updateBar, { passive: true });
    updateBar();
  }
</script>
